

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Transforming Flow Cytometry Data &mdash; FlowCal 1.0.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/my_style.css" type="text/css" />
  

  
    <link rel="top" title="FlowCal 1.0.0 documentation" href="../index.html"/>
        <link rel="up" title="FlowCal’s Python API Tutorial" href="index.html"/>
        <link rel="next" title="Plotting Flow Cytometry Data" href="plot.html"/>
        <link rel="prev" title="Reading Flow Cytometry Data" href="read.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> FlowCal
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fundamentals/index.html">Fundamentals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../excel_ui/index.html">FlowCal&#8217;s Excel UI</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">FlowCal&#8217;s Python API Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="read.html">Reading Flow Cytometry Data</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Transforming Flow Cytometry Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#transforming-to-arbitrary-fluorescence-units-a-u">Transforming to Arbitrary Fluorescence Units (a.u.)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#transforming-to-molecules-of-equivalent-fluorophore-mef">Transforming to Molecules of Equivalent Fluorophore (MEF)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="plot.html">Plotting Flow Cytometry Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="gate.html">Gating Flow Cytometry Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="mef.html">Calibrating Flow Cytometry Data to MEF</a></li>
<li class="toctree-l2"><a class="reference internal" href="excel_ui.html">Processing FCS Files with the Excel UI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/modules.html">FlowCal (Python API) Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/index.html">Contribute</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">FlowCal</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">FlowCal&#8217;s Python API Tutorial</a> &raquo;</li>
      
    <li>Transforming Flow Cytometry Data</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/python_tutorial/transform.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="transforming-flow-cytometry-data">
<h1>Transforming Flow Cytometry Data<a class="headerlink" href="#transforming-flow-cytometry-data" title="Permalink to this headline">¶</a></h1>
<p>This tutorial focuses on how to perform basic transformations to flow cytometry data using <code class="docutils literal"><span class="pre">FlowCal</span></code>, particularly by using the module <a class="reference internal" href="../reference/FlowCal.transform.html#module-FlowCal.transform" title="FlowCal.transform"><code class="xref py py-mod docutils literal"><span class="pre">FlowCal.transform</span></code></a></p>
<p>To start, navigate to the <code class="docutils literal"><span class="pre">examples/FCFiles</span></code> directory included with FlowCal, and open a <code class="docutils literal"><span class="pre">python</span></code> session therein. Then, import <code class="docutils literal"><span class="pre">FlowCal</span></code> as with any other python module.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">FlowCal</span>
</pre></div>
</div>
<div class="section" id="transforming-to-arbitrary-fluorescence-units-a-u">
<h2>Transforming to Arbitrary Fluorescence Units (a.u.)<a class="headerlink" href="#transforming-to-arbitrary-fluorescence-units-a-u" title="Permalink to this headline">¶</a></h2>
<p>Start by loading file <code class="docutils literal"><span class="pre">data_001.fcs</span></code> into an <code class="docutils literal"><span class="pre">FCSData</span></code> object called <code class="docutils literal"><span class="pre">s</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">FlowCal</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">FCSData</span><span class="p">(</span><span class="s">&#39;data_001.fcs&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Let&#8217;s now visualize the contents of the <code class="docutils literal"><span class="pre">FL1</span></code> channel. We will explore <code class="docutils literal"><span class="pre">FlowCal</span></code>&#8216;s plotting functions in the <a class="reference internal" href="plot.html"><em>plotting tutorial</em></a>, but for now let&#8217;s just use <code class="docutils literal"><span class="pre">matplotlib</span></code>&#8216;s <code class="docutils literal"><span class="pre">hist</span></code> function.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">s</span><span class="p">[:,</span> <span class="s">&#39;FL1&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="https://www.dropbox.com/s/nh5nnfxijut3s20/python_tutorial_transform_1.png?raw=1" src="https://www.dropbox.com/s/nh5nnfxijut3s20/python_tutorial_transform_1.png?raw=1" />
<p>Note that the range of the x axis is from 0 to 1024. However, our acquisition software showed fluorescence values from 1 to 10000. Where does the difference come from? An FCS file normally stores raw numbers as they are are reported by the instrument sensors. These are referred to as &#8220;channel numbers&#8221;. The FCS file also contains enough information to transform these numbers back to proper fluorescence units, called Relative Fluorescence Intensities (RFI), or more commonly, arbitrary fluorescence units (a.u.). Depending on the instrument used, this conversion sometimes involves a simple scaling factor, but other times requires a non-straigthforward exponential transformation. The latter is our case.</p>
<p>Fortunately, <code class="docutils literal"><span class="pre">FlowCal</span></code> includes <a class="reference internal" href="../reference/FlowCal.transform.html#FlowCal.transform.to_rfi" title="FlowCal.transform.to_rfi"><code class="xref py py-func docutils literal"><span class="pre">FlowCal.transform.to_rfi()</span></code></a>, a function that reads all the necessary paremeters from the FCS file and figures out how to convert data back to a.u.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s_transformed</span> <span class="o">=</span> <span class="n">FlowCal</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">to_rfi</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">channels</span><span class="o">=</span><span class="s">&#39;FL1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">s_transformed</span></code> now contains the same data as <code class="docutils literal"><span class="pre">s</span></code>, except that the <code class="docutils literal"><span class="pre">FL1</span></code> channel has been transformed to a.u. Let&#8217;s now look at the transformed data.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">s_transformed</span><span class="p">[:,</span> <span class="s">&#39;FL1&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xscale</span><span class="p">(</span><span class="s">&#39;log&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="https://www.dropbox.com/s/eduoahe6qgnu9fe/python_tutorial_transform_2.png?raw=1" src="https://www.dropbox.com/s/eduoahe6qgnu9fe/python_tutorial_transform_2.png?raw=1" />
<p>We will explore a more convenient way to plot transformed data in the <a class="reference internal" href="plot.html"><em>plotting tutorial</em></a>.</p>
<p><a class="reference internal" href="../reference/FlowCal.transform.html#FlowCal.transform.to_rfi" title="FlowCal.transform.to_rfi"><code class="xref py py-func docutils literal"><span class="pre">FlowCal.transform.to_rfi()</span></code></a> can transform several channels at the same time. For example, to transform the forward scatter and side scatted channels, we can use the following.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s_transformed</span> <span class="o">=</span> <span class="n">FlowCal</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">to_rfi</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">channels</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;FSC&#39;</span><span class="p">,</span> <span class="s">&#39;SSC&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="transforming-to-molecules-of-equivalent-fluorophore-mef">
<h2>Transforming to Molecules of Equivalent Fluorophore (MEF)<a class="headerlink" href="#transforming-to-molecules-of-equivalent-fluorophore-mef" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">FlowCal</span></code> includes the ability to transform flow cytometry data to <a class="reference internal" href="../fundamentals/calibration.html"><em>Molecules of Equivalent Fluorophore (MEF)</em></a>, a unit independent of the acquisition settings. However, doing so is slightly more complex. For more information, consult the <a class="reference internal" href="mef.html"><em>MEF tutorial</em></a>.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="plot.html" class="btn btn-neutral float-right" title="Plotting Flow Cytometry Data" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="read.html" class="btn btn-neutral" title="Reading Flow Cytometry Data" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, S. Castillo-Hair, J. Sexton, B. Landry, E. Olson, J. Tabor.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>